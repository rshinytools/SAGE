# SAGE - Study Analytics Generative Engine
# Environment Configuration
# Copy this file to .env and update values as needed

# ===========================================
# AUTHENTICATION
# ===========================================
# Authentication provider: local or ldap
AUTH_PROVIDER=local

# Local authentication credentials
ADMIN_USERNAME=admin
ADMIN_PASSWORD=sage2024
ADMIN_EMAIL=admin@localhost

# Additional users (JSON format)
# Example: {"analyst1": {"password": "pass123", "roles": ["analyst"], "display_name": "Analyst One"}}
SAGE_USERS={}

# LDAP Configuration (when AUTH_PROVIDER=ldap)
LDAP_HOST=localhost
LDAP_PORT=389
LDAP_USE_SSL=false
LDAP_BASE_DN=dc=example,dc=com
LDAP_USER_DN_TEMPLATE=cn={},ou=users,dc=example,dc=com
LDAP_SEARCH_FILTER=(sAMAccountName={})
LDAP_ADMIN_GROUP=SAGE_Admins
LDAP_ANALYST_GROUP=SAGE_Analysts
LDAP_BIND_DN=
LDAP_BIND_PASSWORD=

# ===========================================
# LLM CONFIGURATION
# ===========================================
OLLAMA_HOST=http://localhost:11434

# Primary model - DeepSeek-R1 14B (excellent reasoning for SQL generation)
# Requires ~14GB VRAM (GPU) or ~16GB RAM (CPU)
PRIMARY_MODEL=deepseek-r1:14b

# Fallback model - LLaMA 3.1 8B (faster, less resource intensive)
FALLBACK_MODEL=llama3.1:8b-instruct-q8_0

# Embedding model for vector search
EMBEDDING_MODEL=nomic-embed-text

# Ollama performance settings
OLLAMA_NUM_PARALLEL=2
OLLAMA_MAX_LOADED_MODELS=2

# ===========================================
# DATABASE PATHS
# ===========================================
DUCKDB_PATH=./data/database/clinical.duckdb
CHROMA_PATH=./knowledge/chroma
METADATA_PATH=./knowledge/golden_metadata.json
TRACKER_DB_PATH=./tracker/project_tracker.db

# ===========================================
# CONFIDENCE THRESHOLDS
# ===========================================
CONFIDENCE_HIGH=90
CONFIDENCE_MEDIUM=70
CONFIDENCE_LOW=50

# ===========================================
# TIMEOUTS (seconds)
# ===========================================
QUERY_TIMEOUT_SECONDS=30
LLM_TIMEOUT_SECONDS=60

# ===========================================
# MONITORING
# ===========================================
GRAFANA_PASSWORD=admin
PROMETHEUS_PORT=9090
GRAFANA_PORT=3000

# ===========================================
# SERVICE PORTS
# ===========================================
# NGINX Gateway (main entry point)
NGINX_PORT=80

# Internal service ports
ADMIN_UI_PORT=3001
DOCS_PORT=8080
API_PORT=8002
CHROMADB_PORT=8001

# ===========================================
# SECURITY
# ===========================================
SECRET_KEY=change-this-to-a-random-string-in-production
